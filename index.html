<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="version" content="2.0.3">
    <meta name="description" content="ef-sin Inventur v2.0.3 - Professional & Clean">
    <title>ef-sin Inventur v2.0</title>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dark-mode.css">
    <link rel="stylesheet" href="icon-picker.css">
</head>
<body>

    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <h1>ğŸ“¦ ef-sin Inventur <span class="version">v2.0</span></h1>
        </div>
        <div class="header-right">
            <button id="syncButton" class="btn-icon" title="GitHub Sync">ğŸ”„</button>
            <button id="menuButton" class="btn-icon" title="MenÃ¼">â˜°</button>
        </div>
    </header>

    <!-- Kategorie Tabs -->
    <nav class="category-tabs" id="categoryTabs"></nav>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button id="addNormalButton" class="btn-primary">
            <span class="btn-icon">+</span>
            <span class="btn-text">Artikel</span>
        </button>
        <button id="addQuickButton" class="btn-success">
            <span class="btn-icon">âš¡</span>
            <span class="btn-text">Quick Add</span>
        </button>
    </div>

    <!-- Suche -->
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="ğŸ” Suchen...">
    </div>

    <!-- Artikel Liste -->
    <main class="items-container" id="itemsContainer"></main>

    <!-- Loading -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Lade...</p>
    </div>

    <!-- (ALLE bestehenden Modals unverÃ¤ndert â€“ gekÃ¼rzt zur Ãœbersicht) -->
    <!-- â€¦ deine bestehenden Modals bleiben exakt gleich â€¦ -->

    <!-- Toast -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- ================= ICON PICKER MODAL ================= -->
    <div id="iconPickerModal" class="modal icon-picker-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ¨ Icon auswÃ¤hlen</h2>
                <button class="close-btn" onclick="window.iconPicker.close()">&times;</button>
            </div>

            <div class="modal-body">
                <div class="icon-picker-search">
                    <input type="text" id="iconSearchInput"
                           placeholder="ğŸ” Icon suchen (z.B. 'hammer', 'holz', 'bÃ¼ro')..."
                           autocomplete="off">
                </div>

                <div class="icon-picker-tabs" id="iconPickerTabs"></div>
                <div class="icon-picker-grid" id="iconPickerGrid"></div>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" onclick="window.iconPicker.close()">Abbrechen</button>
            </div>
        </div>
    </div>

    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle" title="Dark Mode umschalten">
        <span id="themeIcon">ğŸŒ™</span>
    </button>

    <!-- ================= SCRIPTS ================= -->
    <script src="src/managers/CategoryManager.js"></script>
    <script src="src/managers/ImageManager.js"></script>
    <script src="src/managers/MultiFileGitHubSync.js"></script>
    <script src="src/components/QuickAdd.js"></script>
    <script src="src/components/IconPicker.js"></script>
    <script src="app.js"></script>

    <!-- ================= ICON PICKER + DARK MODE LOGIC ================= -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        /* ---------- DARK MODE ---------- */
        const html = document.documentElement;
        const toggle = document.getElementById('themeToggle');
        const icon = document.getElementById('themeIcon');

        const saved = localStorage.getItem('theme');
        const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const theme = saved || (systemDark ? 'dark' : 'light');

        html.setAttribute('data-theme', theme);
        icon.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';

        toggle.addEventListener('click', () => {
            const current = html.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            icon.textContent = next === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        });

        /* ---------- ICON PICKER ---------- */
        if (typeof IconPicker !== 'undefined') {
            window.iconPicker = new IconPicker();
        }
    });
    </script>

</body>
</html>
